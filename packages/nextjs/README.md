# 区块链盲拍平台 - 前端

## 性能优化 - 拍卖数据缓存系统

为了减少API请求量并提高应用性能，我们实现了一个基于localStorage的缓存系统，主要针对已结束的拍卖数据进行缓存。

### 缓存系统工作原理

1. **已结束拍卖缓存**
   - 已结束的拍卖数据不会再发生变化，因此非常适合缓存
   - 系统会自动将已结束的拍卖数据存储在浏览器的localStorage中
   - 下次访问时，会优先从缓存中读取数据，而不是从区块链请求

2. **缓存策略**
   - 全局拍卖缓存：存储所有已结束的拍卖
   - 用户创建的拍卖缓存：按用户地址分别存储
   - 用户参与的拍卖缓存：按用户地址分别存储

3. **缓存管理**
   - 缓存有效期为7天
   - 每个缓存类别最多存储200个拍卖数据
   - 自动清理过期和超出数量限制的缓存

### 优势

1. **大幅减少API请求**
   - 减少对区块链节点的请求，提高应用响应速度
   - 降低基础设施成本
   - 减轻用户钱包的负担

2. **优化用户体验**
   - 页面加载更快
   - 降低网络延迟的影响
   - 减少用户等待时间

3. **降低区块链负载**
   - 减少对区块链的重复查询
   - 仅对活跃和最新的拍卖进行实时数据获取

### 使用注意事项

- 只有已结束的拍卖才会被缓存
- 活跃的拍卖（竞拍中、揭示中）仍会从区块链获取最新数据
- 缓存系统自动清理过期缓存，无需手动管理
- 如遇数据显示异常，可以清除浏览器缓存刷新页面

### 技术实现

缓存服务位于 `packages/nextjs/services/store/auctionCache.ts`，主要功能包括：

- 缓存拍卖数据
- 获取缓存数据
- 管理缓存生命周期
- 自动清理过期缓存

所有拍卖相关页面（所有拍卖、我的拍卖等）均已集成该缓存系统，在加载数据时会优先检查缓存。 